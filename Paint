import java.util.Random;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

/**
 *
 * <p>Purdue University -- CS18000 -- Spring 2025</p>
 *
 * @author Gabriel Bautista Purdue CS
 * @version November 18, 2025
 */

public class Paint extends JComponent implements Runnable {

    public Paint() {
        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                // set oldX and oldY coordinates to beginning mouse press
                oldX = e.getX();
                oldY = e.getY();
            }
        });


        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent e) {
                graphics2D.setStroke(new BasicStroke(5)); //////////////////////////////////////////////////////////

                // set current coordinates to where mouse is being dragged
                curX = e.getX();
                curY = e.getY();

                // draw the line between old coordinates and new ones
                graphics2D.drawLine(oldX, oldY, curX, curY);

                // refresh frame and reset old coordinates
                repaint();
                oldX = curX;
                oldY = curY;

            }
        });



    }




//    ActionListener clearActionListener = new ActionListener() {
//        @Override
//        public void actionPerformed(ActionEvent e) {
//
//            paint.clear(graphics2D);
//
//            hexTextField.setText("#");
//            rTextField.setText("");
//            gTextField.setText("");
//            bTextField.setText("");
//
//        }
//
//    };





    public void clear() {
        if (graphics2D != null) {
            graphics2D.setPaint(Color.white);
            graphics2D.fillRect(0, 0, getSize().width, getSize().height);
            graphics2D.setPaint(Color.black);
            repaint();
        }
    } ///////////////////////////////////////////////////////////////////////////

    public void random(int red, int green, int blue) {

        if (graphics2D != null) {
            graphics2D.setPaint(new Color(red, green, blue)); /// Sets pen to color with random RGB values
            repaint();
        }

    }


    public void erase() {

        if (graphics2D != null) {
            graphics2D.setPaint(backgroundColor);
        }
    }


    public void fill() {
        if (graphics2D != null) {

            Color currentColor = graphics2D.getColor();
            graphics2D.setPaint(currentColor);
            backgroundColor = currentColor;
            graphics2D.fillRect(0, 0, getSize().width, getSize().height);
            graphics2D.setPaint(Color.black);
            repaint();
        }
    }

    public void set(Color color) {
        if (graphics2D != null) {
            graphics2D.setPaint(color);
        }
    }


    public void run() {
        JFrame frame = new JFrame();
        frame.setTitle("Paint rahhhh");

        Container content = frame.getContentPane();

        content.setLayout(new BorderLayout());
        paint = new Paint();
        content.add(paint, BorderLayout.CENTER);

        frame.setSize(600, 400);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);

        fill = new JButton("Fill");
        clear = new JButton("Clear");
        erase = new JButton("Erase");
        random = new JButton("Random");

        hexTextField = new JTextField(10);
        hexTextField.setText("#");

        rTextField = new JTextField(5);
        gTextField = new JTextField(5);
        bTextField = new JTextField(5);

        hexButton = new JButton("Hex");
        rgbButton = new JButton("RGB");


        JPanel topPanel = new JPanel();
        topPanel.add(clear);
        topPanel.add(fill);
        topPanel.add(random);
        topPanel.add(erase);
        content.add(topPanel, BorderLayout.NORTH);

        JPanel bottomPanel = new JPanel();
        bottomPanel.add(hexTextField);
        bottomPanel.add(hexButton);
        bottomPanel.add(rTextField);
        bottomPanel.add(gTextField);
        bottomPanel.add(bTextField);
        bottomPanel.add(rgbButton);
        content.add(bottomPanel, BorderLayout.SOUTH);

        clear.addActionListener(new ActionListener() { /// ///////////// Clear button listener

            public void actionPerformed(ActionEvent c) {

                paint.clear();

                hexTextField.setText("#");
                rTextField.setText("");
                gTextField.setText("");
                bTextField.setText("");

            }
        });

        random.addActionListener(new ActionListener() { /// ////////////////// Random button listener
            public void actionPerformed(ActionEvent r) {

                Random randomInt = new Random();

                int red = randomInt.nextInt(256);
                int green = randomInt.nextInt(256);
                int blue = randomInt.nextInt(256);

                paint.random(red, green, blue);

                hexTextField.setText(String.format("#%02x%02x%02x", red, green, blue));
                rTextField.setText(String.format("%d", red));
                gTextField.setText(String.format("%d", green));
                bTextField.setText(String.format("%d", blue));

            }
        });

        erase.addActionListener(new ActionListener() { /// ///////////////// Erase button listener
            public void actionPerformed(ActionEvent e) {


                paint.erase();

            }
        });

        fill.addActionListener(new ActionListener() { /// //////////////// Fill button listener
            public void actionPerformed(ActionEvent f) {



                paint.fill();

                hexTextField.setText("#");
                rTextField.setText("");
                gTextField.setText("");
                bTextField.setText("");

            }
        });

        hexButton.addActionListener(new ActionListener() { /// ///////////// Clear button listener
            public void actionPerformed(ActionEvent h) {

                try {

                    Color hexColor = Color.decode(hexTextField.getText());

                    paint.set(hexColor);

                    rTextField.setText(String.valueOf(hexColor.getRed()));
                    gTextField.setText(String.valueOf(hexColor.getGreen()));
                    bTextField.setText(String.valueOf(hexColor.getBlue()));


                } catch (NumberFormatException n) {
                    JOptionPane.showMessageDialog(null, "Not a valid Hex Value", "Error", JOptionPane.ERROR_MESSAGE);
                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });

        rgbButton.addActionListener(new ActionListener() { /// ///////////// Clear button listener
            public void actionPerformed(ActionEvent h) {

                if (rTextField.getText().equals("")) {
                    rTextField.setText("0");
                } else if (gTextField.getText().equals("")) {
                    gTextField.setText("0");
                } else if (bTextField.getText().equals("")) {
                    bTextField.setText("0");
                }

                try {

                    int red = Integer.parseInt(rTextField.getText());
                    int green = Integer.parseInt(gTextField.getText());
                    int blue = Integer.parseInt(bTextField.getText());

                    Color color = new Color(red, green, blue);

                    paint.set(color);

                    hexTextField.setText(String.format("#%02x%02x%02x", red, green, blue));

                    rTextField.setText(String.valueOf(color.getRed()));
                    gTextField.setText(String.valueOf(color.getGreen()));
                    bTextField.setText(String.valueOf(color.getBlue()));

                } catch (Exception e) {
                    JOptionPane.showMessageDialog(null, "Not a valid RGB Value", "Error", JOptionPane.ERROR_MESSAGE);
                }

            }
        });



    }

    public Color backgroundColor;


    Image image; // the canvas
    Graphics2D graphics2D;  // this will enable drawing
    int curX; // current mouse x coordinate
    int curY; // current mouse y coordinate
    int oldX; // previous mouse x coordinate
    int oldY; // previous mouse y coordinate

    JButton clear; // button to enter information
    JButton erase; // text field for input
    JButton fill;
    JButton random;

    JTextField hexTextField;
    JButton hexButton;
    JTextField rTextField;
    JTextField gTextField;
    JTextField bTextField;
    JButton rgbButton;

    Paint paint; // variable of the type Paint

    protected void paintComponent(Graphics g) {
        if (image == null) {
            image = createImage(getSize().width, getSize().height);

            // this lets us draw on the image (ie. the canvas)
            graphics2D = (Graphics2D) image.getGraphics();

            // gives us better rendering quality for the drawing lines
            graphics2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                    RenderingHints.VALUE_ANTIALIAS_ON);

            // set canvas to white with default paint color
            graphics2D.setPaint(Color.white);
            backgroundColor = Color.white;
            graphics2D.fillRect(0, 0, getSize().width, getSize().height);
            graphics2D.setPaint(Color.black);
            repaint();
        }
        g.drawImage(image, 0, 0, null);
    }





















    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Paint());
    }
}
